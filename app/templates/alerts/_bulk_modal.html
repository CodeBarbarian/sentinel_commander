<div class="modal fade" id="bulkModal" tabindex="-1" aria-labelledby="bulkModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-md">
    <form id="bulkActionForm" method="post" action="/web/v1/alerts/bulk_update" class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">⚙️ Bulk Alert Action</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <!-- Hidden Alert ID Field -->
        <input type="hidden" name="alert_ids" id="selectedAlertIds">

        <div class="mb-3">
          <label for="bulkStatus" class="form-label">Set Status</label>
          <select class="form-select form-select-sm" id="bulkStatus" name="status">
            <option value="">— No Change —</option>
            <option value="new">New</option>
            <option value="in_progress">In Progress</option>
            <option value="done">Done</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="bulkResolution" class="form-label">Set Resolution</label>
          <select class="form-select form-select-sm" id="bulkResolution" name="resolution">
            <option value="">— No Change —</option>
            <option value="not_applicable">📎 Not Applicable</option>
            <option value="false_positive">🚫 False Positive</option>
            <option value="true_positive_without_impact">✅ TP (No Impact)</option>
            <option value="true_positive_with_impact">⚠️ TP (With Impact)</option>
            <option value="legitimate">✔️ Legitimate</option>
            <option value="unknown">❓ Unknown</option>
            <option value="under_investigation">🔍 Under Investigation</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="bulkComment" class="form-label">Resolution Comment</label>
          <textarea class="form-control form-control-sm" id="bulkComment" name="comment" rows="3" placeholder="Optional comment to apply..."></textarea>
        </div>
      </div>
      <input type="hidden" name="return_to" value="{{ request.url.query }}">
      <div class="modal-footer">
        <button type="submit" class="btn btn-sm btn-outline-success">✅ Apply Changes</button>
        <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
      </div>
    </form>
  </div>
</div>
